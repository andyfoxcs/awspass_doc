# WCP25-Cancel Region(取消区域) | AWS 流程引擎对WCP的支持评估

## WCP25-Cancel Region(取消区域)

在流程实例中有禁止一组任务的能力。如果任何任务已经执行（或当前已启动），那么它们可以被撤销。任务需要不是整个流程模型的一个连接子集。

  * 在同一流程实例中，将一组任务定义为一个取消区域。可以取消该区域中正在执行的任务，但其他区域的任务不受影响。
  * 例如在起诉过程中，停止任何访问数据库中证据的任务。

## 解决方案

### 场景设计

  * “节点1”和“节点2”的扩展属性“EXT1”相同，都是“region”
  * 在“捕获时间事件”设置的时间内，“节点1”和“节点2”完成后，等待“脚本任务”任务完成后流程结束
  * 在“捕获时间事件”设置的时间到达后，执行“脚本任务”任务，取消扩展属性“EXT1”值为“region”的节点任务，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part7/wcp25-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>7.Cancellation and Force Completion Patterns(取消模式)>WCP25-Cancel Region(取消区域)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP25-Cancel Region(取消区域)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”已经创建一个任务实例，同时触发“捕获时间事件”
  * 在“捕获时间事件”设置的时间未到达时，在任务列表打开“节点1”任务实例，点击`办理`按钮，完成任务，此时“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击`办理`按钮，完成任务，分支结束，等待“脚本任务”任务完成后，流程结束。
  * 在“捕获时间事件”设置的时间到达时，执行“脚本任务”任务，如果扩展属性“EXT1”为“region”的“节点1”任务和“节点2”任务未执行或者正在执行，都将被取消，流程结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限