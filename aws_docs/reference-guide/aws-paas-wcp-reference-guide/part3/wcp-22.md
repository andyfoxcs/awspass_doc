# WCP22-Recursion(递归) | AWS 流程引擎对WCP的支持评估

## WCP22-Recursion(递归)

在任务执行时，可以调用其本身或和它有关联的部分流程结构。

  * 例如检查机器缺陷，如果执行检查时发现与当前缺陷不同的缺陷，则另起一个实例。

## 解决方案

### 场景设计

  * “节点1”任务完成后，判断是否满足“条件1”或“条件2”
  * 如果满足“条件1”，则执行“调用子流程”，其中子流程就是该流程自己，重复执行“节点1”任务
  * 如果满足“条件2”，则执行“节点2”任务
  * “节点2任务完成后，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part3/wcp22-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>3.Iteration Patterns(模迭代模式)>WCP22-Recursion(递归)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP22-Recursion(递归)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”已创建一个任务实例，点击`办理`按钮，完成任务
  * 此时，引擎判断是否满足“条件1”或“条件2”
  * 若满足“条件1”，则“调用子流程”创建一个子流程实例，由于子流程调用的是流程自己，所以此时“节点1”再创建一个任务实例，在列表打开该任务，点击`办理`按钮，完成任务，重复判断
  * 若满足“条件2”，则“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击办理`按钮，完成任务，流程实例结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限