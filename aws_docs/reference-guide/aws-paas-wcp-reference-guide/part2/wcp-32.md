# WCP32-Cancelling Partial Join(取消部分合并，M选N) | AWS 流程引擎对WCP的支持评估

## WCP32-Cancelling Partial Join(取消部分合并，M选N)

将两个或多个（设为m）分支合并为一个，当多个分支中的n(n < m)个先完成后，控制流即传递到后续分支上。同时，触发 _取消部分合并_ ，其他分支未完成的任务被取消。

  * 在同一流程实例中，基于条件合并前置条件产生的多个分支，未执行完的分支被取消。可以看成是Cancelling Discriminator模式和Structured Partial Join模式的结合。
  * 例如一旦收到照片，它被发送到三个艺术品经销商检查。一旦两个准备状态报告的任务已经完成，剩下的准备状态报告的任务被取消。

## 解决方案

### 场景设计

  * 并行执行“节点1”、“节点2”和“节点3”
  * “节点1”、“节点2”和“节点3”中的两个任务先完成，则执行“节点4”
  * “节点1”、“节点2”和“节点3”任务中，未完成的任务被取消
  * “节点4”完成后，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part2/wcp32-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>2.Advanced Branching and Synchronization Patterns(高级分支和同步模式)>WCP32-Cancelling Partial Join(取消部分合并 M选N)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP32-Cancelling Partial Join(取消部分合并 M选N)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”、“节点2”和“节点3”已分别创建一个任务实例，分别打开“节点1”和“节点2”任务，点击`办理`按钮，完成任务
  * 此时，“节点3”任务实例被删除
  * 同时，“节点4”已创建了一个任务实例，点击`办理`按钮，完成任务，流程实例结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限