# 监控表单引擎 | AWS SLA参考指南

# 监控表单引擎

分析某个AWS PaaS实例采集的`表单引擎`类监控数据，包括

  * 告警事件
  * 事件处理性能
  * 事件出错次数
  * 表单页面构建性能
  * 表单子表构建性能
  * 保存性能
  * 下载Excel性能
  * 上传Excel性能

**表单引擎在出厂时已做优化，初始环境下可承受1000+人的瞬间并发处理。当发生性能问题时，优先检查UI组件数据源、开发者的表单事件代码。**

当AWS处于集群部署时，每个AWS实例节点的引擎性能表现可能是不一样的。

## 告警事件

**说明：该AWS实例有关`表单引擎`类指标发生的告警信息，列出最新5条。**

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/71.png)

告警规则Id | 告警标题 | 触发规则  
---|---|---  
Form Listener Is Very Slow | 表单事件业务处理太慢 | 大于5秒  
Form Listener Error | 表单事件业务处理出错 | 发生即触发  
Form Save Is Very Slow | 表单保存数据处理太慢 | 大于5秒  
  
告警规则是内置的，高级运维人员也可以修改和添加规则。

  * [平台内置的告警规则](<../appendix1/alarm_rules.html>)
  * [管理和修改告警规则](<setting.html>)

## 事件处理性能

**说明：回放该AWS实例处理表单事件逻辑的耗时情况，辅助分析用户在各种表单处理场景下的操作体验**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/72.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 通常是业务代码中包含低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当的索引

## 事件出错次数

**说明：回放该AWS实例处理表单事件逻辑发生错误异常的情况，辅助分析当前系统在处理业务逻辑时的稳定情况**

  * 最近24小时（5分钟合计数据）
  * 最近15天（1小时合计数据）
  * 最近1年（1天合计数据）

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/73.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 检查错误发生时段，`logs/aws.log`日志文件内容

## 表单页面构建性能

**说明：回放该AWS实例将静态表单模板转换成动态Web页面的耗时情况，辅助分析用户在打开表单，等待页面返回的时间**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/74.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 表单存在超过100个字段的表结构时，可能会影响构建速度
  * 表单存在超过10个子表数据源时，可能会影响构建速度
  * 表单的BO表记录超过百万且并发操作同一表时，可能会影响构建速度，创建合理的索引
  * 可能在表单加载前、后的业务代码中包含了低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当索引
  * 增加集群节点，分散逻辑处理压力
  * 极端情况下，对于不需要同步等待结果的非重要操作，可将业务代码放入自己的线程组中异步运行
  * 极端情况下，可以将逻辑运算量巨大、存在高并发处理的重要服务，封装成独立的HTTP微服务（使用开发者熟悉的架构，如Spring Boot）

## 表单子表构建性能

**说明：回放该AWS实例为表单页面构建子表数据结构的耗时情况，辅助分析用户在打开表单刷新子表，等待数据返回的时间**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/75.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 子表UI数据源来自第三方服务时，可能会影响构建速度
  * 子表存在超过100个字段的表结构时，可能会影响构建速度
  * 子表的BO表记录超过百万且并发操作同一表时，可能会影响构建速度
  * 可能在表单加载前、后的业务代码中包含了低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当索引
  * 增加集群节点，分散逻辑处理压力

## 保存性能

**说明：回放该AWS实例完成表单数据保存的耗时情况，辅助分析用户在保存表单、点击办理按钮自动保存时的等待时间**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/76.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 表单存在超过100个字段的表结构时，可能会影响保存速度
  * 表单存在超过10个子表数据源时，可能会影响保存速度
  * 表单的BO表记录超过百万且并发操作同一表时，可能会影响保存速度
  * 可能在表单保存前、后的业务代码中包含了低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当索引
  * 增加集群节点，分解逻辑处理压力
  * 极端情况下，对于不需要同步等待结果的非重要操作，可将业务代码放入自己的线程组中异步运行
  * 极端情况下，可以将逻辑运算量巨大、存在高并发处理的重要服务，封装成独立的HTTP微服务（使用开发者熟悉的架构，如Spring Boot）

## 下载Excel性能

**说明：回放该AWS实例处理表单下载Excel的耗时情况，辅助分析用户在表单点击下载子表数据时的等待时间**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/77.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * 表单子表记录过万时，会影响服务端Excel生成速度
  * 可能在表单Excel事件开发了低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当索引
  * 增加集群节点，分散逻辑处理压力
  * 极端情况下，对于不需要同步等待结果的非重要操作，可将业务代码放入自己的线程组中异步运行
  * 极端情况下，可以将逻辑运算量巨大、存在高并发处理的重要服务，封装成独立的HTTP微服务（使用开发者熟悉的架构，如Spring Boot）

## 上传Excel性能

**说明：回放该AWS实例处理表单上传Excel的耗时情况，辅助分析用户在表单点击上传Excel模板，批量插入数据时的等待时间**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/78.png)

_诊断思路_

  * 在[规则设置](<setting.html>)中创建和管理Alarm，以便记录和通知系统管理员，根据详细信息寻找线索，解决问题
  * Excel记录过万时，会影响服务端数据插入的速度
  * 可能在表单Excel事件开发了低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数
  * 增加集群节点，分散逻辑处理压力
  * 极端情况下，对于不需要同步等待结果的非重要操作，可将业务代码放入自己的线程组中异步运行
  * 极端情况下，可以将逻辑运算量巨大、存在高并发处理的重要服务，封装成独立的HTTP微服务（使用开发者熟悉的架构，如Spring Boot）