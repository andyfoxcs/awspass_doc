# WCP5-Simple Merge(简单汇聚) | AWS 流程引擎对WCP的支持评估

## WCP5-Simple Merge(简单汇聚)

在同一流程实例中，多个分支合并到一个分支时，遵循先到先得原则，只要一个前置分支处理完毕就转移到后继分支路线。

  * _简单汇聚_ 模式提供了一种非同步的多分支合并方式。它可以通过删除多个分支上的相同任务来简化过程模型。 这些分支通过简单汇聚结构进行合并，公共的任务只需要描述一次。
  * 例如无论你是12306网购火车票还是窗口购买，都可以拿票上车。

## 解决方案

### 场景设计

  * “节点1”任务完成后，判断是否满足“条件1”或“条件2”
  * 如果满足“条件1”，则执行“节点2”任务
  * 如果满足“条件2”，则执行“节点3”任务
  * “节点2”或“节点3”任务完成后，执行“节点4”任务
  * “节点4”任务完成后，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part1/wcp5-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>1.Basic Control Flow Patterns(基本控制流模式)>WCP5-Simple Merge(简单汇聚)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP5-Simple Merge(简单汇聚)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”已创建一个任务实例，点击`办理`按钮，完成任务
  * 此时，引擎判断是否满足“条件1”或“条件2”。若“条件1”满足，则“节点2”创建一个任务实例，在列表打开该任务，点击`办理`按钮，完成任务；若“条件2”满足，则“节点3”创建一个任务实例，在列表打开该任务，点击`办理`按钮，完成任务
  * 此时，“节点4”已创建一个任务实例，在列表打开该任务，点击`办理`按钮，完成任务，流程实例结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限