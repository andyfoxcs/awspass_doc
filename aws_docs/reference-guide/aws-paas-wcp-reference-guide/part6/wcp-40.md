# WCP40-Interleaved Routing(交叉路由) | AWS 流程引擎对WCP的支持评估

## WCP40-Interleaved Routing(交叉路由)

一组任务中的每个成员必须执行一次。它们可以以任何顺序执行，但没有两个任务可以在同一时间执行（即没有两个任务可以同时为同一个流程实例活动）。一旦所有的任务都执行完了，这个流程中的下一个任务就可以启动了。

  * 在同一流程实例中，任何两项任务不能同时执行。它和Interleaved Parallel Routing的区别就是这些任务没有固定的执行顺序。
  * 油量检查，馈线测试，部件检查，保修检查都是机器服务流程的一部分，只能由一人承担，但是没有顺序限制。

## 解决方案

### 场景设计

  * 如果“条件1”满足，触发“抛出信号事件sign1”，如果“条件2”满足，触发“抛出信号事件sign2”，分支结束
  * 如果“捕获信号事件sign1”先触发，执行“节点1”任务，“节点1”任务完成后触发“抛出信号事件sign2”，分支结束。此时“捕获信号事件sign2”被触发，执行“节点2”任务，“节点2”任务完成后，触发“抛出信号事件sign1”，流程结束
  * 如果“捕获信号事件sign2”先触发，执行“节点2”任务，“节点2”任务完成后触发“抛出信号事件sign1”，分支结束。此时“捕获信号事件sign1”被触发，执行“节点1”任务，“节点1”任务完成后，触发“抛出信号事件sign2”，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part6/wcp40-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>6.State-based Patterns(状态模式)>WCP40-Interleaved Routing(交叉路由)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP40-Interleaved Routing(交叉路由)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时“捕获信号事件sign1”和“捕获信号事件signa”等待信号的抛出，执行“排他网关1”的条件判断，如果“条件1”满足，触发“抛出信号事件sign1”，抛出信号“sign1”；如果“条件2”满足，触发“抛出信号事件sign2”，抛出信号“sign2”，分支结束
  * 如果“捕获信号事件sign1”先触发，捕获到“sign1”信号，则“节点1”创建一个任务实例，在任务列表中打开“节点1”任务实例，点击`办理`按钮，完成任务。“节点1”任务完成后，触发“抛出信号事件sign2”，抛出信号“sign2”，分支结束。当“捕获信号事件sign2”捕获到信号“sign2”，此时“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击`办理`按钮，完成任务。“节点2”任务完成后，触发“抛出信号事件sign1”抛出信号“sign1”，流程结束
  * 如果“捕获信号事件sign2”先触发，捕获到“sign2”信号，则“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击`办理`按钮，完成任务。“节点2”任务完成后，触发“抛出信号事件sign1”，抛出信号“sign1”，分支结束。当“捕获信号事件sign1”捕获到信号“sign1”，此时“节点1”创建一个任务实例，在任务列表中打开“节点1”任务实例，点击`办理`按钮，完成任务。“节点1”任务完成后，触发“抛出信号事件sign2”抛出信号“sign2”，流程结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限