# 监控流程引擎 | AWS SLA参考指南

# 监控流程引擎

分析某个AWS PaaS实例采集的`流程引擎`类监控数据，包括

  * 告警事件
  * 流程创建性能
  * 流程启动性能
  * 事件处理性能
  * 事件出错次数
  * 节点路由性能
  * 任务创建性能

**流程引擎在出厂时已做优化，初始环境下可承受1000+人的瞬间并发处理。当发生性能问题时，优先检查开发者的业务事件代码。**

当AWS处于集群部署时，每个AWS实例节点的引擎性能表现可能是不一样的。

## 告警事件

**说明：该AWS实例有关`流程引擎`类指标发生的告警信息，列出最新5条。**

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/61.png)

告警规则Id | 告警标题 | 触发规则  
---|---|---  
Process Listener Is Very Slow | 流程事件业务处理太慢 | 大于5秒  
Process Listener Error | 流程事件业务处理出错 | 发生即触发  
Process HumanPerformer Is Very Slow | 流程路由方案处理太慢 | 大于5秒  
  
告警规则是内置的，高级运维人员也可以修改和添加规则。

  * [平台内置的告警规则](<../appendix1/alarm_rules.html>)
  * [管理和修改告警规则](<setting.html>)

## 流程创建性能

**说明：回放该AWS实例创建流程的耗时情况，辅助分析用户在创建流程申请时的操作体验**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/62.png)

_诊断思路_

  * 当创建性能变差时，通常由开发者的业务逻辑事件导致。重点查看SLA相关时段的告警信息（如`流程事件业务处理太慢`），根据详细信息寻找线索，解决问题
  * 如果WFC_PROCESS表已超过1000万记录，请联系炎黄盈动的服务部门，为您提供分表解决方案

## 流程启动性能

**说明：回放该AWS实例启动流程的耗时情况，启动流程时将执行开始事件并触发后继连线节点，如创建待办任务。该KPI辅助分析用户在创建流程申请时的操作体验**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/63.png)

_诊断思路_

  * 当启动性能变差时，通常由开发者的业务逻辑事件导致。重点查看SLA相关时段的告警信息（如`流程事件业务处理太慢`），根据详细信息寻找线索，解决问题
  * 减少SQL操作次数和适当索引
  * 如果WFC_TASK、WFH_TASK表已超过1000万记录，请联系炎黄盈动的服务部门，为您提供分表解决方案

## 事件处理性能

**说明：回放该AWS实例处理流程/节点事件逻辑的耗时情况，辅助分析用户在各种流程处理场景下的操作体验**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/64.png)

_诊断思路_

  * 重点查看SLA相关时段的告警信息（如`流程事件业务处理太慢`），根据详细信息寻找线索，解决问题
  * 通常是业务代码中包含低效的循环处理、慢SQL、有延迟的网络编程
  * 减少SQL操作次数和适当索引
  * 极端情况下，对于不需要同步等待结果的非重要操作，可将业务代码放入自己的线程组中异步运行
  * 极端情况下，可以将逻辑运算量巨大、存在高并发处理的重要服务，封装成独立的HTTP微服务（使用开发者熟悉的架构，如Spring Boot）

## 事件出错次数

**说明：回放该AWS实例处理流程/节点事件时发生错误异常的情况，辅助分析当前系统在处理业务逻辑时的稳定情况**

  * 最近24小时（5分钟合计数据）
  * 最近15天（1小时合计数据）
  * 最近1年（1天合计数据）

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/65.png)

_诊断思路_

  * 重点查看SLA相关时段的告警信息（如`流程事件业务处理出错`），根据详细信息寻找线索，解决问题
  * 检查错误发生时段，`logs/aws.log`日志文件内容

## 节点路由性能

**说明：回放该AWS实例定位任务参与者的耗时情况，辅助分析当用户点击办理按钮时，内部寻找执行人所消耗的等待时间。在大组织架构（如万人以上）或自定义路由规则下，可重点关注该指标**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/66.png)

_诊断思路_

  * 重点查看SLA相关时段的告警信息（如`路由找人处理太慢`），根据详细信息寻找线索，解决问题
  * 减少SQL操作次数和适当索引
  * 如果路由来自外部数据库且已发现明显的性能瓶颈，建议开发者使用Cache缓存规则

## 任务创建性能

**说明：回放该AWS实例创建任务的耗时情况，辅助分析用户在完成当前任务，为执行人创建新任务时的操作体验**

  * 最近24小时（5分钟数据）
  * 最近15天（1小时数据）
  * 最近1年（1天数据）
  * 最大值、最小值、平均值

![](https://docs.awspaas.com/reference-guide/aws-paas-sla-reference-guide/aws_sla_management/67.png)

_诊断思路_

  * 当创建性能变差时，通常由开发者的业务逻辑事件导致。重点查看SLA相关时段的告警信息（如`流程事件业务处理太慢`），根据详细信息寻找线索，解决问题
  * 减少SQL操作次数和适当索引
  * 如果WFC_TASK、WFH_TASK表已超过1000万记录，请联系炎黄盈动的服务部门，为您提供分表解决方案