# WCP18-Milestone(里程碑) | AWS 流程引擎对WCP的支持评估

## WCP18-Milestone(里程碑)

一个任务只有当流程实例（它是一个部分）在一个特定的状态（通常是一个平行的分支）时，才被启动。该状态被假定成一个特定的执行点（也被称为一个里程碑）的流程模型。当执行此执行点时，可以启动指定的任务。如果流程实例已经超出此状态，则无法在现在或者将来任何时候启动任务（即截止日期已过期）。请注意，执行不影响状态本身，即与正常的控制流依赖关系不同的是，它是一个测试，而不是一个触发器。

  * 在同一流程实例中，当达到某些阶段时，某些任务被允许执行。图中示例指，只有当任务B已经被执行而任务C还没有被执行的时候，任务E才允许执行，在任务B未执行或任务C已经执行的情况下，任务E不允许执行。
  * 接收新学生任务只能在开始招生任务，关闭招生任务之间执行。

## 解决方案

### 场景设计

  * 在“脚本任务1”任务完成后且在“捕获时间事件”等待时间内，完成“节点2”任务时选择的审核菜单是“不同意”，则执行“节点3”任务，选择的审核菜单是“同意”则执行“节点2”任务，当“节点3”任务或者“节点2”任务完成，且“脚本任务2”任务完成后，执行“节点4”任务，“节点4”任务完成后，流程结束。
  * 在“脚本任务2”任务完成后，再执行“节点2”任务，完成“节点2”任务是选择的审核菜单是“同意”或者“不同意”都执行“节点2”任务，“节点2”任务完成后，执行“节点4”任务，完成“节点4”任务，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part6/wcp18-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>6.State-based Patterns(状态模式)>WCP18-Milestone(里程碑)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP18-Milestone(里程碑)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”已创建一个任务实例，同时“脚本任务1”任务被执行，触发“捕获时间事件”
  * 在“捕获时间事件”设置的时间未到达时，在任务列表中打开“节点1”任务实例，审核菜单选择“同意”，点击`办理`按钮，完成任务，此时流程实例到达“节点2”任务，“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击`办理`按钮，完成任务。等待“捕获时间事件”设置的时间到达，且“脚本任务2”任务完成后，到达“节点4”任务，“节点4”创建一个任务实例，在任务列表中打开“节点4”任务实例，点击`办理`按钮，完成任务，流程结束
  * 在“捕获时间事件”设置的时间未到达时，在任务列表中打开“节点1”任务实例，审核菜单选择“不同意”，点击`办理`按钮，完成任务，此时流程实例到达“节点3”任务，“节点3”创建一个任务实例，在任务列表中打开“节点3”任务实例，点击`办理`按钮，完成任务。等待“捕获时间事件”设置的时间到达，且“脚本任务2”任务完成后，到达“节点4”任务，“节点4”创建一个任务实例，在任务列表中打开“节点4”任务实例，点击`办理`按钮，完成任务，流程结束
  * 在“捕获时间事件”设置的时间到达过后且“脚本任务2”任务完成后，在任务列表中打开“节点1”任务实例，审核菜单选择“同意”或者“不同意”，点击`办理`按钮，完成任务，流程实例都到达“节点2”任务，“节点2”创建一个任务实例，在任务列表中打开“节点2”任务实例，点击`办理`按钮，完成任务，此时“节点4”任务已创建一个任务实例，在任务列表中打开“节点4”任务实例，点击`办理`按钮，完成任务，流程结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限