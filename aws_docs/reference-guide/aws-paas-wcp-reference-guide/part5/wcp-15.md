# WCP15-Multiple Instances without a Priori Run-Time Knowledge(运行期无法确定多例) | AWS 流程引擎对WCP的支持评估

## WCP15-Multiple Instances without a Priori Run-Time Knowledge(运行期无法确定多例)

在某一个流程实例中，某个任务可以创建多个实例。产生的实例的个数取决于一些运行时因素，包括状态数据、资源可用性和进程间通信，直到最后一个实例完成后才知道。一旦启动，这些实例是相互独立，并同时运行的。在任何时候，虽然实例运行，但是额外的实例可以被启动。这些实例在完成时需要同步，实例都完成后，会触发后续任务。

  * 在同一流程中，同步完成在运行期设定好的和任意添加的所有实例。
  * 与WCP14不同的是，在实例运行期间，可以任意地添加实例。因为在某些情况下，实例的数量无法预知。
  * 石油运输从工厂到选定位置涉及多种运输任务，根据运输量初步估计，但如果运输需求不足总会产生额外任务。

## 解决方案

### 场景设计

  * “节点1”任务完成后，并行执行“脚本任务”和“节点2”任务，“脚本任务”动态的创建2个“节点2”任务实例，当“节点2”的所有任务实例完成后，流程结束

### 流程建模

![](https://docs.awspaas.com/reference-guide/aws-paas-wcp-reference-guide/part5/wcp15-process-model.png)

> 可以在`工作流控制模式概念验证`应用的`流程模型>5.Multiple Instance Patterns(多实例模式)>WCP15-Multiple Instances without a Priori Run-Time Knowledge(运行期无法确定多例)`中访问该流程模型

### 引擎执行

  * 确认已安装`工作流控制模式概念验证`应用，访问前端`WCP概念验证`菜单入口
  * 在左侧树中点击`WCP15-Multiple Instances without a Priori Run-Time Knowledge(运行期无法确定多例)`项
  * 在列表中点击`新建`按钮，流程实例被创建
  * 此时，“节点1”已经创建一个任务实例，点击`办理`按钮，完成任务
  * 此时，“节点2”产生多个任务实例，同时并行执行“脚本任务”，动态的创建2个“节点2”的任务实例
  * 在任务列表中打开“节点2”的任务实例，点击`办理`按钮，完成任务，当所有“节点2”任务实例完成后，流程结束

> 如果列表中未出现`新建`按钮，请首先为此用户设置可启动该流程的权限